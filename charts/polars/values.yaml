# -- Override the name of the chart
nameOverride: ""
# -- Override the full name of the chart
fullnameOverride: ""

# -- Common labels for all resources
podLabels: {}
# -- Common annotations for all resources
podAnnotations: {}

# -- (uuid) Unique identifier for the Polars cluster. Must be a valid UUID. This ID is used to identify the cluster in a multi-tenant environment. Defaults to "helm namespace/helm release name" if not set.
clusterId: ""

# @schema
# required: true
# @schema
# -- To use this Helm Chart, you must accept the EULA. If you don't accept the EULA, this chart creates a single deployment that prints the EULA.
acceptEula: false

license:
  # -- the name containing your polars license key
  secretName: ""
  # -- the property on the secret containing your license key
  secretProperty: ""

# @schema
# $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/imagePullSecrets
# @schema
# -- ImagePullSecrets is an optional list of references to secrets in the same namespace to use for pulling any of the images used by this PodSpec. If specified, these secrets will be passed to individual puller implementations for them to use. More info: https://kubernetes.io/docs/concepts/containers/images#specifying-imagepullsecrets-on-a-pod
imagePullSecrets: []
# - name: secret-name

runtime:
  prebuilt:
    enabled: false

    runtime:
      # -- Container image name. More info: https://kubernetes.io/docs/concepts/containers/images
      repository: "your-prebuilt-image"
      # -- Container image tag. More info: https://kubernetes.io/docs/concepts/containers/images
      tag: ""
      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.Container/properties/imagePullPolicy
      # @schema
      # -- Image pull policy. One of Always, Never, IfNotPresent. Defaults to Always if :latest tag is specified, or IfNotPresent otherwise. Cannot be updated. More info: https://kubernetes.io/docs/concepts/containers/images#updating-images
      pullPolicy: ""

  composed:
    enabled: true

    dist:
      # -- Container image name. More info: https://kubernetes.io/docs/concepts/containers/images
      repository: "polarscloud/polars-on-premises"
      # -- Container image tag. More info: https://kubernetes.io/docs/concepts/containers/images
      tag: ""
      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.Container/properties/imagePullPolicy
      # @schema
      # -- Image pull policy. One of Always, Never, IfNotPresent. Defaults to Always if :latest tag is specified, or IfNotPresent otherwise. Cannot be updated. More info: https://kubernetes.io/docs/concepts/containers/images#updating-images
      pullPolicy: "IfNotPresent"

    runtime:
      # -- Container image name. More info: https://kubernetes.io/docs/concepts/containers/images
      repository: "python"
      # -- Container image tag. More info: https://kubernetes.io/docs/concepts/containers/images
      tag: "3.13.9-slim-bookworm"
      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.Container/properties/imagePullPolicy
      # @schema
      # -- Image pull policy. One of Always, Never, IfNotPresent. Defaults to Always if :latest tag is specified, or IfNotPresent otherwise. Cannot be updated. More info: https://kubernetes.io/docs/concepts/containers/images#updating-images
      pullPolicy: ""

    requirements: ""

    polarsExtras: "async,cloudpickle,database,deltalake,fsspec,iceberg,numpy,pandas,pyarrow,pydantic,timezone"

telemetry:
  # -- Endpoint to send OTLP traces and metrics to.
  otlpEndpoint: ""

# -- One of "info", "debug", "trace".
logLevel: "info"

# -- Heartbeat interval between polars workers and the scheduler in seconds.
workerHeartbeatIntervalSecs: 5

# -- Disable host metrics collection for the dashboard
disableHostMetrics: false

# -- Ephemeral storage for queries that don't specify a result location. Recommended to use S3 storage for persistence of results, but a volume claim may also be used. The compute plane does not automatically clean up anonymous results.
anonymousResults:
  # -- Configure S3 storage for anonymous results.
  s3:
    # -- Enable S3 storage for anonymous results.
    enabled: false
    # -- The entire S3 URI. If the bucket requires authentication, make sure to provide the credentials in the options field.
    endpoint: "s3://my-bucket/path/to/dir"
    # @schema
    # items:
    #   $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.EnvVar
    # @schema
    # -- Storage options for the S3 bucket. These correspond to scan_parquet's `storage_options` parameter. We only support the AWS keys. More info: https://docs.pola.rs/api/python/stable/reference/api/polars.scan_parquet.html
    options: []
#      - name: aws_access_key_id
#        valueFrom:
#          secretKeyRef:
#            name: my-s3-secret
#            key: accessKeyId

# -- Disabling this option prevents the worker from writing to local disk. It is currently not possible to configure which sink locations are allowed. Users can alternatively configure sinks that write to S3. More info: https://docs.pola.rs/user-guide/io/cloud-storage/#writing-to-cloud-storage
allowSharedDisk: true

# -- Ephemeral storage for shuffle data.
shuffleData:
  # -- Configure ephemeral storage for shuffle data.
  ephemeralVolumeClaim:
    # -- Enable ephemeral volume claim for shuffle data.
    enabled: false
    # -- storageClassName is the name of the StorageClass required by the claim. More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes#class-1
    storageClassName: "hostpath"
    # -- Size of the volume requested by the claim. More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes#capacity
    size: 125Gi

  # -- Shared persistent storage for shuffle data.
  sharedPersistentVolumeClaim:
    # -- Enable shared persistent volume claim for shuffle data.
    enabled: false
    # -- storageClassName is the name of the StorageClass required by the claim. More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes#class-1
    storageClassName: ""
    # -- Size of the volume requested by the claim. More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes#capacity
    size: 125Gi

  # -- Configure S3 storage as shuffle data location.
  s3:
    # -- Enable S3 storage for shuffle data.
    enabled: false
    # -- The entire S3 URI. If the bucket requires authentication, make sure to provide the credentials in the options field.
    endpoint: "s3://my-bucket/path/to/dir"
    # @schema
    # items:
    #   $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.EnvVar
    # @schema
    # -- Storage options for the S3 bucket. These correspond to scan_parquet's `storage_options` parameter. We only support the AWS keys. More info: https://docs.pola.rs/api/python/stable/reference/api/polars.scan_parquet.html
    options: []
#      - name: aws_access_key_id
#        valueFrom:
#          secretKeyRef:
#            name: my-s3-secret
#            key: accessKeyId

# -- Ephemeral storage for temporary data used in polars (e.g. polars streaming data). Recommended to use some host local SSD storage for better performance.
temporaryData:
  # -- Configure ephemeral storage for temporary data.
  ephemeralVolumeClaim:
    # -- Enable ephemeral volume claim for temporary data.
    enabled: false
    # -- storageClassName is the name of the StorageClass required by the claim. More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes#class-1
    storageClassName: "hostpath"
    # -- Size of the volume requested by the claim. More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes#capacity
    size: 125Gi

observatory:
  # -- Maximum number of bytes for host metrics storage
  maxMetricsBytesTotal: 104857600

worker:
  serviceAccount:
    # -- Whether to create a service account.
    create: false
    # -- The name of the service account to bind the leader election role binding to when create is false. Ignored if create is true. Defaults to "default" if not set.
    name: ""
    # -- AutomountServiceAccountToken indicates whether pods running as this service account should have an API token automatically mounted. Can be overridden at the pod level.
    automount: true

  deployment:
    # -- Number of polars worker replicas.
    replicaCount: 2

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.apps.v1.DeploymentSpec/properties/revisionHistoryLimit
    # @schema
    # @ignore
    # -- revisionHistoryLimit is the maximum number of revisions that will be maintained in the Deployment's revision history. The default value is 10.
    revisionHistoryLimit: 10

    # -- Additional annotations to add to the scheduler pod.
    podAnnotations: {}

    # -- Additional labels to add to the scheduler pod.
    podLabels: {}

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/dnsPolicy
    # @schema
    # @ignore
    # -- Set DNS policy for the pod. Defaults to "ClusterFirst". Valid values are 'ClusterFirstWithHostNet', 'ClusterFirst', 'Default' or 'None'. DNS parameters given in DNSConfig will be merged with the policy selected with DNSPolicy. To have DNS options set along with hostNetwork, you have to specify DNS policy explicitly to 'ClusterFirstWithHostNet'. More info: https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/#pod-s-dns-policy
    dnsPolicy: ""

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/dnsConfig
    # @schema
    # @ignore
    # -- Specifies the DNS parameters of a pod. Parameters specified here will be merged to the generated DNS configuration based on DNSPolicy. More info: https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/#pod-dns-config
    dnsConfig: {}

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/schedulerName
    # @schema
    # @ignore
    # -- If specified, the pod will be dispatched by specified scheduler. If not specified, the pod will be dispatched by default scheduler.
    schedulerName: ""

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/automountServiceAccountToken
    # @schema
    # @ignore
    # -- AutomountServiceAccountToken indicates whether a service account token should be automatically mounted.
    automountServiceAccountToken: true

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/securityContext
    # @schema
    # @ignore
    # -- SecurityContext holds pod-level security attributes and common container settings.
    podSecurityContext: { }
    #  fsGroup: 2000
    #  runAsUser: 1000
    #  runAsNonRoot: true

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/hostAliases
    # @schema
    # @ignore
    # -- List of host aliases to add to the pod's /etc/hosts file. More info: https://kubernetes.io/docs/concepts/services-networking/add-entries-to-pod-etc-hosts-with-host-aliases/
    hostAliases: []

    distContainer:
      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.Container/properties/securityContext
      # @schema
      # @ignore
      # -- SecurityContext defines the security options the container should be run with. If set, the fields of SecurityContext override the equivalent fields of PodSecurityContext. More info: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
      securityContext: { }
      #  capabilities:
      #    drop:
      #    - ALL
      #  readOnlyRootFilesystem: true

      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.Container/properties/resources
      # @schema
      # @ignore
      # -- Requests describes the minimum amount of compute resources required. If Requests is omitted for a container, it defaults to Limits if that is explicitly specified, otherwise to an implementation-defined value. Requests cannot exceed Limits. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
      resources: {}
      #  requests:
      #    cpu: 500m
      #    memory: 512Mi
      #  limits:
      #    cpu: 1000m
      #    memory: 1Gi

    runtimeContainer:
      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.Container/properties/securityContext
      # @schema
      # @ignore
      # -- SecurityContext defines the security options the container should be run with. If set, the fields of SecurityContext override the equivalent fields of PodSecurityContext. More info: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
      securityContext: { }
      #  capabilities:
      #    drop:
      #    - ALL
      #  readOnlyRootFilesystem: true

      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.Container/properties/readinessProbe
      # @schema
      # @ignore
      readinessProbe:
        grpc:
          port: 5052
        # -- Number of seconds after the container has started before liveness probes are initiated. More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes
        initialDelaySeconds: 1
        # -- How often (in seconds) to perform the probe.
        periodSeconds: 10
        # -- Minimum consecutive failures for the probe to be considered failed after having succeeded.
        failureThreshold: 25

      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.Container/properties/env
      # @schema
      # @ignore
      # -- List of environment variables to set in the container.
      env: []
      # - name: ENV_VAR_NAME
      #   value: ENV_VAR_VALUE

      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.Container/properties/lifecycle
      # @schema
      # @ignore
      # -- Actions that the management system should take in response to container lifecycle events.
      lifecycleHooks: {}

      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.Container/properties/resources
      # @schema
      # @ignore
      # -- Requests describes the minimum amount of compute resources required. If Requests is omitted for a container, it defaults to Limits if that is explicitly specified, otherwise to an implementation-defined value. Requests cannot exceed Limits. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
      resources: {}
      #  requests:
      #    cpu: 500m
      #    memory: 512Mi
      #  limits:
      #    cpu: 1000m
      #    memory: 1Gi

      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.Container/properties/volumeMounts
      # @schema
      # @ignore
      # -- Pod volumes to mount into the container's filesystem.
      volumeMounts: []
      # - name: volume-name
      #   mountPath: /path/to/mount

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/priorityClassName
    # @schema
    # @ignore
    # -- If specified, indicates the pod's priority. "system-node-critical" and "system-cluster-critical" are two special keywords which indicate the highest priorities with the former being the highest priority. Any other name must be defined by creating a PriorityClass object with that name. If not specified, the pod priority will be default or zero if there is no default. More info: https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption/#priorityclass
    priorityClassName: ""

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/runtimeClassName
    # @schema
    # @ignore
    # -- RuntimeClassName refers to a RuntimeClass object in the node.k8s.io group, which should be used to run this pod. If no RuntimeClass resource matches the named class, the pod will not be run. If unset or empty, the "legacy" RuntimeClass will be used, which is an implicit class with an empty definition that uses the default runtime handler. More info: https://kubernetes.io/docs/concepts/containers/runtime-class/
    runtimeClassName: ""

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/volumes
    # @schema
    # @ignore
    # -- List of volumes that can be mounted by containers belonging to the pod. More info: https://kubernetes.io/docs/concepts/storage/volumes
    volumes: []
    # - name: volume-name
    #   emptyDir: {}

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/nodeSelector
    # @schema
    # @ignore
    # -- NodeSelector is a selector which must be true for the pod to fit on a node. Selector which must match a node's labels for the pod to be scheduled on that node. More info: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/
    nodeSelector: { }
    #  kubernetes.io/e2e-az-name: e2e-az1

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/affinity
    # @schema
    # @ignore
    # -- If specified, the pod's scheduling constraints
    affinity: { }
    #  nodeAffinity:
    #    requiredDuringSchedulingIgnoredDuringExecution:
    #      nodeSelectorTerms:
    #      - matchExpressions:
    #        - key: kubernetes.io/e2e-az-name
    #          operator: In
    #          values:
    #          - e2e-az1

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/tolerations
    # @schema
    # @ignore
    # -- If specified, the pod's tolerations.
    tolerations: [ ]
    # - key: "key"
    #   operator: "Equal"
    #   value: "value"
    #   effect: "NoSchedule"

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/topologySpreadConstraints
    # @schema
    # @ignore
    # -- TopologySpreadConstraints describes how a group of pods ought to spread across topology domains. Scheduler will schedule pods in a way which abides by the constraints. All topologySpreadConstraints are ANDed.
    topologySpreadConstraints: []
    # - maxSkew: 1
    #   topologyKey: topology.kubernetes.io/zone
    #   whenUnsatisfiable: DoNotSchedule

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/hostNetwork
    # @schema
    # @ignore
    # -- Host networking requested for this pod. Use the host's network namespace. If this option is set, the ports that will be used must be specified. Default to false.
    hostNetwork: false

scheduler:
  # Services
  services:
    internal:
      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.ServiceSpec/properties/type
      # @schema
      # -- type determines how the Service is exposed. Defaults to ClusterIP. Valid options are ClusterIP, NodePort, and LoadBalancer. "ClusterIP" allocates a cluster-internal IP address for load-balancing to endpoints. Endpoints are determined by the selector or if that is not specified, by manual construction of an Endpoints object or EndpointSlice objects. If clusterIP is "None", no virtual IP is allocated and the endpoints are published as a set of endpoints rather than a virtual IP. "NodePort" builds on ClusterIP and allocates a port on every node which routes to the same endpoints as the clusterIP. "LoadBalancer" builds on NodePort and creates an external load-balancer (if supported in the current cloud) which routes to the same endpoints as the clusterIP. "ExternalName" aliases this service to the specified externalName. Several other fields do not apply to ExternalName services. More info: https://kubernetes.io/docs/concepts/services-networking/service/#publishing-services-service-types
      type: ClusterIP
      # -- Additional annotations on the service object. Used by some controllers to setup TLS termination or load balancers.
      annotations: {}
    scheduler:
      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.ServiceSpec/properties/type
      # @schema
      # -- type determines how the Service is exposed. Defaults to ClusterIP. Valid options are ClusterIP, NodePort, and LoadBalancer. "ClusterIP" allocates a cluster-internal IP address for load-balancing to endpoints. Endpoints are determined by the selector or if that is not specified, by manual construction of an Endpoints object or EndpointSlice objects. If clusterIP is "None", no virtual IP is allocated and the endpoints are published as a set of endpoints rather than a virtual IP. "NodePort" builds on ClusterIP and allocates a port on every node which routes to the same endpoints as the clusterIP. "LoadBalancer" builds on NodePort and creates an external load-balancer (if supported in the current cloud) which routes to the same endpoints as the clusterIP. "ExternalName" aliases this service to the specified externalName. Several other fields do not apply to ExternalName services. More info: https://kubernetes.io/docs/concepts/services-networking/service/#publishing-services-service-types
      type: ClusterIP
      # -- Additional annotations on the service object. Used by some controllers to setup TLS termination or load balancers.
      annotations: {}
    observatory:
      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.ServiceSpec/properties/type
      # @schema
      # -- type determines how the Service is exposed. Defaults to ClusterIP. Valid options are ClusterIP, NodePort, and LoadBalancer. "ClusterIP" allocates a cluster-internal IP address for load-balancing to endpoints. Endpoints are determined by the selector or if that is not specified, by manual construction of an Endpoints object or EndpointSlice objects. If clusterIP is "None", no virtual IP is allocated and the endpoints are published as a set of endpoints rather than a virtual IP. "NodePort" builds on ClusterIP and allocates a port on every node which routes to the same endpoints as the clusterIP. "LoadBalancer" builds on NodePort and creates an external load-balancer (if supported in the current cloud) which routes to the same endpoints as the clusterIP. "ExternalName" aliases this service to the specified externalName. Several other fields do not apply to ExternalName services. More info: https://kubernetes.io/docs/concepts/services-networking/service/#publishing-services-service-types
      type: ClusterIP
      # -- Additional annotations on the service object. Used by some controllers to setup TLS termination or load balancers.
      annotations: {}

  serviceAccount:
    # -- Whether to create a service account for the scheduler.
    create: false
    # -- The name of the service account to bind the leader election role binding to when create is false. Ignored if create is true. Defaults to "default" if not set.
    name: ""
    # -- AutomountServiceAccountToken indicates whether pods running as this service account should have an API token automatically mounted. Can be overridden at the pod level.
    automount: true

  deployment:
    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.apps.v1.DeploymentSpec/properties/revisionHistoryLimit
    # @schema
    # @ignore
    # -- revisionHistoryLimit is the maximum number of revisions that will be maintained in the Deployment's revision history. The default value is 10.
    revisionHistoryLimit: 10

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.apps.v1.DeploymentSpec/properties/strategy
    # @schema
    # @ignore
    # -- Rollout strategy for the scheduler deployment. One of RollingUpdate or Recreate.
    rollout:
      strategy: RollingUpdate
      rollingUpdate:
        maxUnavailable: 1

    # -- Additional annotations to add to the scheduler pod.
    podAnnotations: {}

    # -- Additional labels to add to the scheduler pod.
    podLabels: {}

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/dnsPolicy
    # @schema
    # @ignore
    # -- Set DNS policy for the pod. Defaults to "ClusterFirst". Valid values are 'ClusterFirstWithHostNet', 'ClusterFirst', 'Default' or 'None'. DNS parameters given in DNSConfig will be merged with the policy selected with DNSPolicy. To have DNS options set along with hostNetwork, you have to specify DNS policy explicitly to 'ClusterFirstWithHostNet'. More info: https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/#pod-s-dns-policy
    dnsPolicy: ""

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/dnsConfig
    # @schema
    # @ignore
    # -- Specifies the DNS parameters of a pod. Parameters specified here will be merged to the generated DNS configuration based on DNSPolicy. More info: https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/#pod-dns-config
    dnsConfig: {}

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/schedulerName
    # @schema
    # @ignore
    # -- If specified, the pod will be dispatched by specified scheduler. If not specified, the pod will be dispatched by default scheduler.
    schedulerName: ""

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/automountServiceAccountToken
    # @schema
    # @ignore
    # -- AutomountServiceAccountToken indicates whether a service account token should be automatically mounted.
    automountServiceAccountToken: true

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/securityContext
    # @schema
    # @ignore
    # -- SecurityContext holds pod-level security attributes and common container settings.
    podSecurityContext: { }
    #  fsGroup: 2000
    #  runAsUser: 1000
    #  runAsNonRoot: true

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/hostAliases
    # @schema
    # @ignore
    # -- List of host aliases to add to the pod's /etc/hosts file. More info: https://kubernetes.io/docs/concepts/services-networking/add-entries-to-pod-etc-hosts-with-host-aliases/
    hostAliases: []

    # @ignore
    distContainer:
      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.Container/properties/securityContext
      # @schema
      # @ignore
      # -- SecurityContext defines the security options the container should be run with. If set, the fields of SecurityContext override the equivalent fields of PodSecurityContext. More info: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
      securityContext: { }
      #  capabilities:
      #    drop:
      #    - ALL
      #  readOnlyRootFilesystem: true

      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.Container/properties/resources
      # @schema
      # @ignore
      # -- Requests describes the minimum amount of compute resources required. If Requests is omitted for a container, it defaults to Limits if that is explicitly specified, otherwise to an implementation-defined value. Requests cannot exceed Limits. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
      resources: {}
      #  requests:
      #    cpu: 500m
      #    memory: 512Mi
      #  limits:
      #    cpu: 1000m
      #    memory: 1Gi

    runtimeContainer:
      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.Container/properties/securityContext
      # @schema
      # @ignore
      # -- SecurityContext defines the security options the container should be run with. If set, the fields of SecurityContext override the equivalent fields of PodSecurityContext. More info: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
      securityContext: { }
      #  capabilities:
      #    drop:
      #    - ALL
      #  readOnlyRootFilesystem: true

      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.Container/properties/readinessProbe
      # @schema
      # @ignore
      readinessProbe:
        tcpSocket:
          port: sched
        # -- Number of seconds after the container has started before liveness probes are initiated. More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes
        initialDelaySeconds: 1
        # -- How often (in seconds) to perform the probe.
        periodSeconds: 10
        # -- Minimum consecutive failures for the probe to be considered failed after having succeeded.
        failureThreshold: 25

      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.Container/properties/env
      # @schema
      # @ignore
      # -- List of environment variables to set in the container.
      env: []
      # - name: ENV_VAR_NAME
      #   value: ENV_VAR_VALUE

      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.Container/properties/lifecycle
      # @schema
      # @ignore
      # -- Actions that the management system should take in response to container lifecycle events.
      lifecycleHooks: {}

      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.Container/properties/resources
      # @schema
      # @ignore
      # -- Requests describes the minimum amount of compute resources required. If Requests is omitted for a container, it defaults to Limits if that is explicitly specified, otherwise to an implementation-defined value. Requests cannot exceed Limits. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
      resources: {}
      #  requests:
      #    cpu: 500m
      #    memory: 512Mi
      #  limits:
      #    cpu: 1000m
      #    memory: 1Gi

      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.Container/properties/volumeMounts
      # @schema
      # @ignore
      # -- Pod volumes to mount into the container's filesystem.
      volumeMounts: []
      # - name: volume-name
      #   mountPath: /path/to/mount

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/priorityClassName
    # @schema
    # @ignore
    # -- If specified, indicates the pod's priority. "system-node-critical" and "system-cluster-critical" are two special keywords which indicate the highest priorities with the former being the highest priority. Any other name must be defined by creating a PriorityClass object with that name. If not specified, the pod priority will be default or zero if there is no default. More info: https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption/#priorityclass
    priorityClassName: ""

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/runtimeClassName
    # @schema
    # @ignore
    # -- RuntimeClassName refers to a RuntimeClass object in the node.k8s.io group, which should be used to run this pod. If no RuntimeClass resource matches the named class, the pod will not be run. If unset or empty, the "legacy" RuntimeClass will be used, which is an implicit class with an empty definition that uses the default runtime handler. More info: https://kubernetes.io/docs/concepts/containers/runtime-class/
    runtimeClassName: ""

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/volumes
    # @schema
    # @ignore
    # -- List of volumes that can be mounted by containers belonging to the pod. More info: https://kubernetes.io/docs/concepts/storage/volumes
    volumes: []
    # - name: volume-name
    #   emptyDir: {}

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/nodeSelector
    # @schema
    # @ignore
    # -- NodeSelector is a selector which must be true for the pod to fit on a node. Selector which must match a node's labels for the pod to be scheduled on that node. More info: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/
    nodeSelector: { }
    #  kubernetes.io/e2e-az-name: e2e-az1

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/affinity
    # @schema
    # @ignore
    # -- If specified, the pod's scheduling constraints
    affinity: { }
    #  nodeAffinity:
    #    requiredDuringSchedulingIgnoredDuringExecution:
    #      nodeSelectorTerms:
    #      - matchExpressions:
    #        - key: kubernetes.io/e2e-az-name
    #          operator: In
    #          values:
    #          - e2e-az1

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/tolerations
    # @schema
    # @ignore
    # -- If specified, the pod's tolerations.
    tolerations: [ ]
    # - key: "key"
    #   operator: "Equal"
    #   value: "value"
    #   effect: "NoSchedule"

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/topologySpreadConstraints
    # @schema
    # @ignore
    # -- TopologySpreadConstraints describes how a group of pods ought to spread across topology domains. Scheduler will schedule pods in a way which abides by the constraints. All topologySpreadConstraints are ANDed.
    topologySpreadConstraints: []
    # - maxSkew: 1
    #   topologyKey: topology.kubernetes.io/zone
    #   whenUnsatisfiable: DoNotSchedule

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/hostNetwork
    # @schema
    # @ignore
    # -- Host networking requested for this pod. Use the host's network namespace. If this option is set, the ports that will be used must be specified. Default to false.
    hostNetwork: false

tests:
  images:
    - repository: "polarscloud/polars-on-premises-tests"
      tag: "0.4.3"
      pullPolicy: IfNotPresent

  serviceAccount:
    # -- Whether to create a service account.
    create: false
    # -- The name of the service account to bind the leader election role binding to when create is false. Ignored if create is true. Defaults to "default" if not set.
    name: ""
    # -- AutomountServiceAccountToken indicates whether pods running as this service account should have an API token automatically mounted. Can be overridden at the pod level.
    automount: true

  pod:
    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/dnsPolicy
    # @schema
    # @skip
    # -- Set DNS policy for the pod. Defaults to "ClusterFirst". Valid values are 'ClusterFirstWithHostNet', 'ClusterFirst', 'Default' or 'None'. DNS parameters given in DNSConfig will be merged with the policy selected with DNSPolicy. To have DNS options set along with hostNetwork, you have to specify DNS policy explicitly to 'ClusterFirstWithHostNet'. More info: https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/#pod-s-dns-policy
    dnsPolicy: ""

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/dnsConfig
    # @schema
    # @ignore
    # -- Specifies the DNS parameters of a pod. Parameters specified here will be merged to the generated DNS configuration based on DNSPolicy. More info: https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/#pod-dns-config
    dnsConfig: {}

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/schedulerName
    # @schema
    # @ignore
    # -- If specified, the pod will be dispatched by specified scheduler. If not specified, the pod will be dispatched by default scheduler.
    schedulerName: ""

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/automountServiceAccountToken
    # @schema
    # @ignore
    # -- AutomountServiceAccountToken indicates whether a service account token should be automatically mounted.
    automountServiceAccountToken: true

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/securityContext
    # @schema
    # @ignore
    # -- SecurityContext holds pod-level security attributes and common container settings.
    podSecurityContext: { }
    #  fsGroup: 2000
    #  runAsUser: 1000
    #  runAsNonRoot: true

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/hostAliases
    # @schema
    # @ignore
    # -- List of host aliases to add to the pod's /etc/hosts file. More info: https://kubernetes.io/docs/concepts/services-networking/add-entries-to-pod-etc-hosts-with-host-aliases/
    hostAliases: []

    distContainer:
      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.Container/properties/securityContext
      # @schema
      # @ignore
      # -- SecurityContext defines the security options the container should be run with. If set, the fields of SecurityContext override the equivalent fields of PodSecurityContext. More info: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
      securityContext: { }
      #  capabilities:
      #    drop:
      #    - ALL
      #  readOnlyRootFilesystem: true

      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.Container/properties/resources
      # @schema
      # @ignore
      # -- Requests describes the minimum amount of compute resources required. If Requests is omitted for a container, it defaults to Limits if that is explicitly specified, otherwise to an implementation-defined value. Requests cannot exceed Limits. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
      resources: {}
      #  requests:
      #    cpu: 500m
      #    memory: 512Mi
      #  limits:
      #    cpu: 1000m
      #    memory: 1Gi

    runtimeContainer:
      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.Container/properties/securityContext
      # @schema
      # @ignore
      # -- SecurityContext defines the security options the container should be run with. If set, the fields of SecurityContext override the equivalent fields of PodSecurityContext. More info: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
      securityContext: { }
      #  capabilities:
      #    drop:
      #    - ALL
      #  readOnlyRootFilesystem: true

      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.Container/properties/env
      # @schema
      # @ignore
      # -- List of environment variables to set in the container.
      env: []
      # - name: ENV_VAR_NAME
      #   value: ENV_VAR_VALUE

      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.Container/properties/lifecycle
      # @schema
      # @ignore
      # -- Actions that the management system should take in response to container lifecycle events.
      lifecycleHooks: {}

      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.Container/properties/resources
      # @schema
      # @ignore
      # -- Requests describes the minimum amount of compute resources required. If Requests is omitted for a container, it defaults to Limits if that is explicitly specified, otherwise to an implementation-defined value. Requests cannot exceed Limits. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
      resources: {}
      #  requests:
      #    cpu: 500m
      #    memory: 512Mi
      #  limits:
      #    cpu: 1000m
      #    memory: 1Gi

      # @schema
      # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.Container/properties/volumeMounts
      # @schema
      # @ignore
      # -- Pod volumes to mount into the container's filesystem.
      volumeMounts: []
      # - name: volume-name
      #   mountPath: /path/to/mount

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/priorityClassName
    # @schema
    # @ignore
    # -- If specified, indicates the pod's priority. "system-node-critical" and "system-cluster-critical" are two special keywords which indicate the highest priorities with the former being the highest priority. Any other name must be defined by creating a PriorityClass object with that name. If not specified, the pod priority will be default or zero if there is no default. More info: https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption/#priorityclass
    priorityClassName: ""

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/runtimeClassName
    # @schema
    # @ignore
    # -- RuntimeClassName refers to a RuntimeClass object in the node.k8s.io group, which should be used to run this pod. If no RuntimeClass resource matches the named class, the pod will not be run. If unset or empty, the "legacy" RuntimeClass will be used, which is an implicit class with an empty definition that uses the default runtime handler. More info: https://kubernetes.io/docs/concepts/containers/runtime-class/
    runtimeClassName: ""

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/volumes
    # @schema
    # @ignore
    # -- List of volumes that can be mounted by containers belonging to the pod. More info: https://kubernetes.io/docs/concepts/storage/volumes
    volumes: []
    # - name: volume-name
    #   emptyDir: {}

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/nodeSelector
    # @schema
    # @ignore
    # -- NodeSelector is a selector which must be true for the pod to fit on a node. Selector which must match a node's labels for the pod to be scheduled on that node. More info: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/
    nodeSelector: { }
    #  kubernetes.io/e2e-az-name: e2e-az1

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/affinity
    # @schema
    # @ignore
    # -- If specified, the pod's scheduling constraints
    affinity: { }
    #  nodeAffinity:
    #    requiredDuringSchedulingIgnoredDuringExecution:
    #      nodeSelectorTerms:
    #      - matchExpressions:
    #        - key: kubernetes.io/e2e-az-name
    #          operator: In
    #          values:
    #          - e2e-az1

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/tolerations
    # @schema
    # @ignore
    # -- If specified, the pod's tolerations.
    tolerations: [ ]
    # - key: "key"
    #   operator: "Equal"
    #   value: "value"
    #   effect: "NoSchedule"

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/topologySpreadConstraints
    # @schema
    # @ignore
    # -- TopologySpreadConstraints describes how a group of pods ought to spread across topology domains. Scheduler will schedule pods in a way which abides by the constraints. All topologySpreadConstraints are ANDed.
    topologySpreadConstraints: []
    # - maxSkew: 1
    #   topologyKey: topology.kubernetes.io/zone
    #   whenUnsatisfiable: DoNotSchedule

    # @schema
    # $ref: ../../_definitions.json#/definitions/io.k8s.api.core.v1.PodSpec/properties/hostNetwork
    # @schema
    # @ignore
    # -- Host networking requested for this pod. Use the host's network namespace. If this option is set, the ports that will be used must be specified. Default to false.
    hostNetwork: false